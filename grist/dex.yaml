issuer: https://grist.macloud.fr/dex
storage:
  type: sqlite3
  config:
    file: /persist/dex.db
web:
  http: 0.0.0.0:5556  # Dex écoute sur toutes les interfaces, port 5556
connectors:
- type: ldap
  id: ldap
  name: OpenLDAP
  config:
    host: ldap:389
    insecureSkipVerify: true
    bindDN: cn=admin,dc=macloud,dc=fr
    bindPW: secret
    usernamePrompt: Email
    userSearch:
      baseDN: ou=people,dc=macloud,dc=fr
      filter: "(objectClass=inetOrgPerson)"
      username: mail
      idAttr: uid
      emailAttr: mail
      nameAttr: cn
staticClients:
- id: grist
  redirectURIs:
  - "https://grist.macloud.fr/oauth2/callback"
  name: "Grist"
  secret: un-secret-tres-long-et-securise  # Remplacez par une valeur sécurisée
